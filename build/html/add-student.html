<ons-page ng-controller="AddStudentController as page">
    <ons-toolbar class="default-toolbar">
        <div class="left" ng-click="mainNavigator.popPage()">
            <ons-toolbar-button>
                <ons-icon size="24px" icon="md-close"></ons-icon>
            </ons-toolbar-button>
        </div>
        <div class="center" translate>Add Student</div>
        <div class="right" translate>
            <ons-toolbar-button ng-click="page.addStudent()">Add</ons-toolbar-button>
        </div>
    </ons-toolbar>
    <ons-row class="add-student-header">
        <ons-col>
            <div class="add-student-content">
                Add a student from:<br/>
                <strong>{{page.school.name}}</strong>
            </div>
        </ons-col>
        <ons-col width="35%">
            <div class="add-student-content-right align-center">
                <ons-button ng-click="page.changeSchool()" class="change-school" translate>Change</ons-button>
            </div>
        </ons-col>
    </ons-row>
    <div class="add-student-content" ng-show="page.students.length === 0">
        <div class="spacer">
            <ons-input class="input-wide" id="studentId" name="studentId" modifier="underbar" placeholder="{{page.placeholder.studentId}}" float ng-model="page.studentId"
                       ng-class="{error: page.hasFieldError(page.studentId)}"
                       ng-enter="page.addStudent()" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
            </ons-input>
            <div class="field-error" ng-show="page.studentId.length == 0 && page.error.studentId.length > 0">{{page.error.studentId}}</div>
        </div>

        <div class="spacer">
            <ons-input class="input-wide" id="initialFirst" name="initialFirst" modifier="underbar" placeholder="{{page.placeholder.initialFirst}}" float ng-model="page.initialFirst"
                       ng-class="{error: page.hasFieldError(page.initialFirst)}"
                       ng-enter="page.addStudent()" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
            </ons-input>
            <div class="field-error" ng-show="page.initialFirst.length == 0 && page.error.initialFirst.length > 0">{{page.error.initialFirst}}</div>
        </div>

        <div class="spacer">
            <ons-input class="input-wide" id="initialLast" name="initialLast" modifier="underbar" placeholder="{{page.placeholder.initialLast}}" float ng-model="page.initialLast"
                       ng-class="{error: page.hasFieldError(page.initialLast)}"
                       ng-enter="page.addStudent()" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
            </ons-input>
            <div class="field-error" ng-show="page.initialLast.length == 0 && page.error.initialLast.length > 0">{{page.error.initialLast}}</div>
        </div>
    </div>
    <ons-list ng-show="page.students.length > 0">
        <ons-list-item ng-repeat="student in page.students">
            <div class="left">
                <ons-icon class="menu-content-icon" icon="ion-android-person" size="20px"></ons-icon>
            </div>
            <div class="center">
                <div class="menu-content-text">{{student.name}}</div>
            </div>
        </ons-list-item>
    </ons-list>
    <div class="add-student-content align-center">
        <ons-button ng-click="page.addStudent()" class="spacer-large" translate>Add</ons-button>
    </div>
    <ons-modal var="schoolModal">
        <div class="school-modal login-panel" ng-class="{ios:ons.platform.isIOS()}">
            <div class="cancel">
                <span class="school-modal-title" translate>Search for Your School</span>
                <ons-icon icon="md-close" size="32px" ng-click="page.cancel()"></ons-icon>
            </div>
            <div class="lookup-modal">
                <ons-icon class="lookup-icon-search" tappable icon="ion-ios-search, material:ion-android-search" size="20px"></ons-icon>

                <ons-input ng-if="!ons.platform.isIOS()" id="school-lookup" class="lookup-input" modifier="underbar" ng-model="page.searchParam" ng-change="page.change()"
                           placeholder="{{page.placeholder.school}}" float autocomplete="off"></ons-input>
                <ons-input ng-if="ons.platform.isIOS()" id="school-lookup" class="lookup-input" modifier="underbar" ng-model="page.searchParam" ng-change="page.change()"
                           autocomplete="off"></ons-input>
                <ons-list class="lookup-list" ng-show="page.lookup.expanded">
                    <ons-list-item ng-repeat="item in page.lookup.displaySet" tappable ng-click="page.selectSchool(item)" modifier="longdivider">
                        <div class="lookup-text">{{item.name}}</div>
                        <div class="lookup-subtext">{{item.districtName}}</div>
                    </ons-list-item>
                </ons-list>
            </div>
            <!--<div class="field-error" ng-show="!page.isSchoolSelected(page.selectedSchool) && page.error.school.length > 0">{{page.error.school}}</div>-->
            <div class="add-student-buttons">
                <ons-button ng-click="page.select()" class="login-button" translate>Select</ons-button>
            </div>
        </div>
    </ons-modal>
</ons-page>
